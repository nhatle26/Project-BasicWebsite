<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>MT Boutique</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <style>
      body {
        background-color: #f5f5f5;
        font-family: Arial, sans-serif;
      }

      h1 {
        text-align: center;
        color: #fff;
        margin: 30px 0;
        font-weight: bold;
        background-image: linear-gradient(to top left, rgb(83, 37, 168), rgb(156, 193, 155));
        padding: 20px;
        border-radius: 10px;
      }

      h2 {
        color: #333;
        font-weight: bold;
        margin: 20px 0;
      }

      .card {
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        height: auto;
        width: 100%;
      }

      .card-img-top {
        border-radius: 8px 8px 0 0;
        object-fit: cover;
        height: 400px;
      }

      .card-title {
        font-size: 16px;
        color: #333;
      }

      .card-text {
        font-size: 18px;
        color: #e74c3c;
        font-weight: bold;
      }

      .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
      }

      .management-section {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 30px;
      }

      .form-group label {
        font-weight: bold;
        color: #333;
      }

      .table-section {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 30px;
      }

      table {
        background-color: white;
      }

      table th {
        background-color: #007bff;
        color: white;
        text-align: center;
        vertical-align: middle;
      }

      table td {
        vertical-align: middle;
        text-align: center;
      }

      .btn-edit {
        background-color: #28a745;
        color: white;
        margin-right: 5px;
      }

      .btn-delete {
        background-color: #dc3545;
        color: white;
      }

      .product-image-small {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 5px;
      }

      .search-section {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
      }

      .btn-management {
        background-color: #6c757d;
        color: white;
        padding: 15px 30px;
        font-size: 18px;
        font-weight: bold;
        border-radius: 8px;
        margin: 20px auto;
        display: block;
        width: 300px;
      }

      .btn-management:hover {
        background-color: #5a6268;
        color: white;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
<body onload="initApp()">
    <div class="container-fluid">
      <h1>MT BOUTIQUE</h1>

      <!-- N√öT QU·∫¢N L√ù S·∫¢N PH·∫®M -->
      <button class="btn btn-management" onclick="toggleManagement()">
        üìã QU·∫¢N L√ù S·∫¢N PH·∫®M
      </button>

      <!-- PH·∫¶N QU·∫¢N L√ù (·∫®N M·∫∂C ƒê·ªäNH) -->
      <div id="managementArea" class="hidden">
        <!-- FORM S·∫¢N PH·∫®M -->
        <div class="container management-section">
          <h2>Form s·∫£n ph·∫©m</h2>
          <form id="productForm" onsubmit="handleSubmit(event)">
            <div class="form-group">
              <label>ID:</label>
              <input type="text" class="form-control" id="productId" readonly />
            </div>
            <div class="form-group">
              <label>T√™n:</label>
              <input type="text" class="form-control" id="productName" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m" required />
            </div>
            <div class="form-group">
              <label>M√£ s·∫£n ph·∫©m:</label>
              <input type="text" class="form-control" id="productCode" placeholder="Nh·∫≠p m√£ s·∫£n ph·∫©m" required />
            </div>
            <div class="form-group">
              <label>·∫¢nh (link):</label>
              <input type="url" class="form-control" id="productImage" placeholder="Nh·∫≠p link ·∫£nh s·∫£n ph·∫©m" required />
            </div>
            <div class="form-group">
              <label>Gi√°:</label>
              <input type="text" class="form-control" id="productPrice" placeholder="VD: 450.000" required />
            </div>
            <div class="form-group">
              <label>Danh m·ª•c:</label>
              <select class="form-control" id="productCategory" required>
                <option value="">-- Ch·ªçn danh m·ª•c --</option>
                <option value="man">Nam</option>
                <option value="women">N·ªØ</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary" id="btnSubmit">Th√™m</button>
            <button type="button" class="btn btn-secondary" id="btnCancel" onclick="cancelEdit()" style="display:none;">H·ªßy</button>
          </form>
        </div>

        <!-- DANH S√ÅCH S·∫¢N PH·∫®M -->
        <div class="container table-section">
          <h2>Danh s√°ch s·∫£n ph·∫©m</h2>
          <table class="table table-bordered table-hover">
            <thead>
              <tr>
                <th>STT</th>
                <th>ID</th>
                <th>T√™n</th>
                <th>·∫¢nh</th>
                <th>Gi√°</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody id="productTableBody">
            </tbody>
          </table>
        </div>
      </div>

      <!-- T√åM KI·∫æM S·∫¢N PH·∫®M -->
      <div class="container search-section">
        <h2 class="text-center mb-3">T√åM KI·∫æM S·∫¢N PH·∫®M</h2>
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="input-group mb-3">
<input
                type="text"
                class="form-control form-control-lg"
                placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m b·∫°n mu·ªën t√¨m..."
                id="searchInput"
              />
              <div class="input-group-append">
                <button class="btn btn-primary btn-lg" type="button" onclick="handleSearch()">
                  T√¨m ki·∫øm
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row" id="searchResult"></div>
      </div>

      <!-- HI·ªÇN TH·ªä S·∫¢N PH·∫®M THEO DANH M·ª§C -->
      <h1>TH·ªúI TRANG NAM</h1>
      <div class="container-fluid">
        <div class="row" id="men"></div>
      </div>

      <div class="container-fluid" style="margin-top: 20px; margin-bottom: 20px">
        <h1>TH·ªúI TRANG N·ªÆ</h1>
        <div class="row" id="women"></div>
      </div>
    </div>

    <script>
      // D·ªØ li·ªáu ban ƒë·∫ßu
      var defaultMan = [
        {
          id: 1,
          name: "√Åo kho√°c Sweater nam",
          code: "S01",
          price: "450.000",
          image: "https://salt.tikicdn.com/cache/750x750/ts/product/83/98/00/298d8423a74b1b67518e80187594dfde.jpg.webp",
        },
        {
          id: 2,
          name: "√Åo da nam",
          code: "D01",
          price: "1.750.000",
          image: "https://thoitrangbigsize.vn/wp-content/uploads/2023/12/BS2259.jpg",
        },
        {
          id: 3,
          name: "√Åo Jeans Nam",
          code: "J01",
          price: "500.000",
          image: "https://img.lazcdn.com/g/ff/kf/S87ea352358e740f1b61051656748c73bp.jpg_720x720q80.jpg_.webp",
        },
        {
          id: 4,
          name: "√Åo Bomber nam",
          code: "B01",
          price: "450.000",
          image: "https://product.hstatic.net/200000642007/product/50bks_3ajp‚Ä¶82b997b755189e28_4f44f42287da4b41bddb39c975eb033f_master.jpg",
        },
      ];

      var defaultWomen = [
        {
          id: 1,
          name: "√Åo Jean N·ªØ",
          code: "J02",
          price: "550.000",
          image: "https://m.yodycdn.com/blog/mau-ao-khoac-jean-nu-moi-nhat-1.jpg",
        },
        {
          id: 2,
          name: "√Åo da n·ªØ",
          code: "D02",
          price: "1.250.000",
          image: "https://product.hstatic.net/1000078312/product/ao-da-that-nu-x10_master.jpg",
        },
        {
          id: 3,
          name: "√Åo sweater n·ªØ",
          code: "S02",
          price: "470.000",
          image: "https://maylanstore.com/wp-content/uploads/2023/10/ao-sweater-ins-theu-noi-4-768x768.jpg",
        },
        {
          id: 4,
          name: "√Åo thun",
          code: "TC1025011BA",
          price: "300.000",
          image: "https://dony.vn/wp-content/uploads/2022/01/ao-bomber-nu-dep-1.jpg",
        },
      ];

      // Bi·∫øn to√†n c·ª•c
      var man = [];
      var women = [];
      var isEditMode = false;
      var editingId = null;
var editingCategory = null;
      var isManagementOpen = false;

      // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
      function initApp() {
        loadDataFromLocalStorage();
        listProducts();
        setupSearchEvents();
      }

      // Load d·ªØ li·ªáu t·ª´ localStorage
      function loadDataFromLocalStorage() {
        var savedMan = localStorage.getItem("man");
        var savedWomen = localStorage.getItem("women");

        if (savedMan) {
          man = JSON.parse(savedMan);
        } else {
          man = [...defaultMan];
          localStorage.setItem("man", JSON.stringify(man));
        }

        if (savedWomen) {
          women = JSON.parse(savedWomen);
        } else {
          women = [...defaultWomen];
          localStorage.setItem("women", JSON.stringify(women));
        }
      }

      // L∆∞u d·ªØ li·ªáu v√†o localStorage
      function saveToLocalStorage() {
        localStorage.setItem("man", JSON.stringify(man));
        localStorage.setItem("women", JSON.stringify(women));
      }

      // Toggle hi·ªÉn th·ªã ph·∫ßn qu·∫£n l√Ω
      function toggleManagement() {
        var managementArea = document.getElementById("managementArea");
        isManagementOpen = !isManagementOpen;
        
        if (isManagementOpen) {
          managementArea.classList.remove("hidden");
          displayProductTable();
          window.scrollTo({ top: managementArea.offsetTop - 100, behavior: 'smooth' });
        } else {
          managementArea.classList.add("hidden");
          cancelEdit();
        }
      }

      // Hi·ªÉn th·ªã b·∫£ng s·∫£n ph·∫©m
      function displayProductTable() {
        var tbody = document.getElementById("productTableBody");
        tbody.innerHTML = "";

        var allProducts = [];
        man.forEach(function(item) {
          allProducts.push({ ...item, category: "man" });
        });
        women.forEach(function(item) {
          allProducts.push({ ...item, category: "women" });
        });

        allProducts.forEach(function(item, index) {
          var row = "<tr>";
          row += "<td>" + (index + 1) + "</td>";
          row += "<td>" + item.id + "</td>";
          row += "<td>" + item.name + "</td>";
          row += '<td><img src="' + item.image + '" class="product-image-small"></td>';
          row += "<td>" + item.price + "</td>";
          row += "<td>";
          row += '<button class="btn btn-sm btn-edit" onclick="editProduct(' + item.id + ', \'' + item.category + '\')">S·ª≠a</button>';
          row += '<button class="btn btn-sm btn-delete" onclick="deleteProduct(' + item.id + ', \'' + item.category + '\')">X√≥a</button>';
          row += "</td>";
          row += "</tr>";
          tbody.innerHTML += row;
        });
      }

      // X·ª≠ l√Ω submit form
      function handleSubmit(event) {
        event.preventDefault();

        var id = document.getElementById("productId").value;
        var name = document.getElementById("productName").value;
var code = document.getElementById("productCode").value;
        var price = document.getElementById("productPrice").value;
        var image = document.getElementById("productImage").value;
        var category = document.getElementById("productCategory").value;

        if (isEditMode) {
          // C·∫≠p nh·∫≠t s·∫£n ph·∫©m
          updateProduct(editingId, editingCategory, {
            id: parseInt(id),
            name: name,
            code: code,
            price: price,
            image: image
          });
          alert("C·∫≠p nh·∫≠t s·∫£n ph·∫©m th√†nh c√¥ng!");
          isEditMode = false;
          editingId = null;
          editingCategory = null;
          document.getElementById("btnSubmit").textContent = "Th√™m";
          document.getElementById("btnCancel").style.display = "none";
        } else {
          // Th√™m s·∫£n ph·∫©m m·ªõi
          var newProduct = {
            id: getNextId(category),
            name: name,
            code: code,
            price: price,
            image: image
          };

          if (category === "man") {
            man.push(newProduct);
          } else {
            women.push(newProduct);
          }

          saveToLocalStorage();
          alert("Th√™m s·∫£n ph·∫©m th√†nh c√¥ng!");
        }

        document.getElementById("productForm").reset();
        document.getElementById("productId").value = "";
        displayProductTable();
        listProducts();
      }

      // L·∫•y ID ti·∫øp theo
      function getNextId(category) {
        var arr = category === "man" ? man : women;
        if (arr.length === 0) return 1;
        var maxId = Math.max(...arr.map(function(item) { return item.id; }));
        return maxId + 1;
      }

      // S·ª≠a s·∫£n ph·∫©m
      function editProduct(id, category) {
        var arr = category === "man" ? man : women;
        var product = arr.find(function(item) { return item.id === id; });

        if (product) {
          document.getElementById("productId").value = product.id;
          document.getElementById("productName").value = product.name;
          document.getElementById("productCode").value = product.code;
          document.getElementById("productPrice").value = product.price;
          document.getElementById("productImage").value = product.image;
          document.getElementById("productCategory").value = category;

          isEditMode = true;
          editingId = id;
          editingCategory = category;
          document.getElementById("btnSubmit").textContent = "C·∫≠p nh·∫≠t";
          document.getElementById("btnCancel").style.display = "inline-block";

          var formPosition = document.getElementById("productForm").offsetTop;
          window.scrollTo({ top: formPosition - 100, behavior: 'smooth' });
        }
      }

      // C·∫≠p nh·∫≠t s·∫£n ph·∫©m
      function updateProduct(id, category, newData) {
        var arr = category === "man" ? man : women;
var index = arr.findIndex(function(item) { return item.id === id; });

        if (index !== -1) {
          arr[index] = newData;
          saveToLocalStorage();
        }
      }

      // X√≥a s·∫£n ph·∫©m
      function deleteProduct(id, category) {
        if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m n√†y?")) {
          if (category === "man") {
            man = man.filter(function(item) { return item.id !== id; });
          } else {
            women = women.filter(function(item) { return item.id !== id; });
          }

          saveToLocalStorage();
          displayProductTable();
          listProducts();
          alert("X√≥a s·∫£n ph·∫©m th√†nh c√¥ng!");
        }
      }

      // H·ªßy ch·ªânh s·ª≠a
      function cancelEdit() {
        isEditMode = false;
        editingId = null;
        editingCategory = null;
        document.getElementById("productForm").reset();
        document.getElementById("productId").value = "";
        document.getElementById("btnSubmit").textContent = "Th√™m";
        document.getElementById("btnCancel").style.display = "none";
      }

      // Hi·ªÉn th·ªã danh s√°ch s·∫£n ph·∫©m
      function listProducts() {
        document.getElementById("men").innerHTML = "";
        document.getElementById("women").innerHTML = "";

        man.forEach(function(item) {
          var demo = '<div class="col-3">';
          demo += '<div class="card" style="width: 18rem;">';
          demo += '<img src="' + item.image + '" class="card-img-top">';
          demo += '<div class="card-body">';
          demo += '<h5 class="card-title">' + item.name + "</h5>";
          demo += '<p class="card-text">' + item.price + "</p>";
          demo += '<a href="#" class="btn btn-primary" onclick="order(); return false;">ƒê·∫∑t mua</a>';
          demo += "</div></div></div>";
          document.getElementById("men").innerHTML += demo;
        });

        women.forEach(function(item) {
          var demo = '<div class="col-3">';
          demo += '<div class="card" style="width: 18rem;">';
          demo += '<img src="' + item.image + '" class="card-img-top">';
          demo += '<div class="card-body">';
          demo += '<h5 class="card-title">' + item.name + "</h5>";
          demo += '<p class="card-text">' + item.price + "</p>";
          demo += '<a href="#" class="btn btn-primary" onclick="order(); return false;">ƒê·∫∑t mua</a>';
          demo += "</div></div></div>";
          document.getElementById("women").innerHTML += demo;
        });
      }

      // T√¨m ki·∫øm s·∫£n ph·∫©m
      function findProductByName(name) {
        var allProducts = [...man, ...women];
        return allProducts.filter(function(product) {
          return product.name.toLowerCase().includes(name.toLowerCase());
        });
      }

      function showSearchResult(keyword) {
        var resultDiv = document.getElementById("searchResult");
        resultDiv.innerHTML = "";
var foundProducts = findProductByName(keyword);

        if (foundProducts.length > 0) {
          foundProducts.forEach(function(item) {
            var demo = '<div class="col-3">';
            demo += '<div class="card" style="width: 18rem;">';
            demo += '<img src="' + item.image + '" class="card-img-top">';
            demo += '<div class="card-body">';
            demo += '<h5 class="card-title">' + item.name + "</h5>";
            demo += '<p class="card-text">' + item.price + "</p>";
            demo += '<a href="#" class="btn btn-primary" onclick="order(); return false;">ƒê·∫∑t mua</a>';
            demo += "</div></div></div>";
            resultDiv.innerHTML += demo;
          });
        } else {
          resultDiv.innerHTML = '<div class="col-12"><p class="text-center">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o!</p></div>';
        }
      }

      function handleSearch() {
        var searchInput = document.getElementById("searchInput");
        var keyword = searchInput.value.trim();

        if (keyword !== "") {
          showSearchResult(keyword);
        } else {
          document.getElementById("searchResult").innerHTML = "";
        }
      }

      function setupSearchEvents() {
        var searchInput = document.getElementById("searchInput");
        if (searchInput) {
          searchInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
              handleSearch();
            }
          });
        }
      }

      function order() {
        alert("ƒê·∫∑t h√†ng th√†nh c√¥ng!");
      }
    </script>
  </body>
</html>